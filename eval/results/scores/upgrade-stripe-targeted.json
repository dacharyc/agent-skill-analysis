{
  "skill_name": "upgrade-stripe-targeted",
  "scored_at": "2026-02-17T02:52:01.920389+00:00",
  "model_judge": "claude-opus-4-6",
  "model_generation": "claude-sonnet-4-5-20250929",
  "contamination_score": 0.93,
  "risk_level": "experimental",
  "test_category": "partial_knowledge",
  "tasks": [
    {
      "task_id": "upgrade-stripe-targeted-01",
      "task_type": "direct_target",
      "target_language": "python",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python with proper use of the stripe Python SDK. It correctly pins the API version, creates customers with email/metadata, creates subscriptions with price IDs, and handles Stripe exceptions comprehensively. The code is truncated (the `create_customer_with_subscription` method is cut off), costing it on completeness, but the core requested functionality is fully implemented. One minor note: in newer versions of the stripe library (v6+), exceptions are under `stripe.StripeError` rather than `stripe.error.StripeError`, but the pattern used here is correct for the widely-used v5.x and earlier SDKs.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": true
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": false
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": false
                }
              ],
              "expected_hits": [
                "stripe\\.api_version"
              ],
              "expected_misses": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_hit_count": 1,
              "expected_total": 5,
              "expected_hit_rate": 0.2,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "Using `self.client.customers.create(**customer_params)` with keyword-unpacked dict instead of the newer StripeClient pattern `self.client.customers.create(params={...})` \u2014 the StripeClient (v2+) typically takes a params dict rather than unpacked kwargs",
                "Exception classes like `stripe.InvalidRequestError`, `stripe.APIError`, `stripe.RateLimitError` are from the older `stripe` module-level API; the newer `StripeClient` raises exceptions under `stripe.error.*` or different exception hierarchy",
                "Accessing `e.user_message`, `e.message`, `e.param`, `e.code` on exceptions mixes older and newer attribute patterns",
                "Return type annotations say `Dict[str, Any]` but the Stripe client returns Stripe resource objects, not plain dicts"
              ],
              "brief_assessment": "The code is entirely valid Python with good structure, type hints, docstrings, and comprehensive error handling. However, it mixes API patterns: it correctly uses `StripeClient` for initialization with `stripe_version`, but then uses the older module-level exception classes and kwargs-based create calls rather than the newer StripeClient's `params` dict pattern. The code is also truncated \u2014 the `create_customer_with_subscription` method is cut off mid-definition \u2014 so the convenience method is incomplete, though the core task (create customer + create subscription) is covered by the individual methods.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": true
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_misses": [
                "stripe\\.api_version"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "StripeClient's resource methods (e.g., self.client.customers.create()) use positional params dict, not keyword arguments \u2014 the keyword-argument style (email=email, customer=customer_id, items=[...]) matches the older module-level stripe.Customer.create() API, not the newer StripeClient API which takes a single params dict",
                "Error classes are imported from stripe.error which is the old module-level pattern; the newer StripeClient raises exceptions from stripe._error or similar namespaces, though stripe.error still works for backward compatibility",
                "The .message, .param, .code, .decline_code, .http_status attribute access on exceptions follows the older stripe-python error patterns; newer StripeClient exceptions may differ slightly",
                "Return type annotations reference stripe.Customer and stripe.Subscription which are module-level resource types, not necessarily the return types from StripeClient methods"
              ],
              "brief_assessment": "The code is entirely valid Python with good structure, logging, documentation, and comprehensive error handling. However, it mixes the newer StripeClient instantiation pattern with the older module-level API calling conventions \u2014 StripeClient resource methods typically accept a params dictionary rather than keyword arguments. The error handling imports from stripe.error are from the legacy pattern. The code is truncated at the end (create_customer_with_subscription is cut off), but the two core requested functions are complete.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": true
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": false
                }
              ],
              "expected_hits": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create"
              ],
              "expected_misses": [
                "stripe\\.api_version",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_hit_count": 3,
              "expected_total": 5,
              "expected_hit_rate": 0.6,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python with no foreign language patterns. It uses the older `stripe.error.*` exception hierarchy (pre-v6 style with `stripe.error` instead of `stripe.StripeError`, etc.) and sets the global `stripe.api_key` rather than using the newer `stripe.StripeClient` constructor, but this is still a valid and widely-used pattern in the Python SDK. The code is truncated at the end (the final `except Exception` block is cut off), which slightly impacts functional correctness and code quality, but the vast majority of the task\u2014initializing with a pinned API version, creating a customer with email/metadata, creating a subscription with a price ID, and handling Stripe exceptions\u2014is implemented. Overall, this is well-structured, well-documented code with only minor issues.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": true
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": false
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": false
                }
              ],
              "expected_hits": [
                "stripe\\.api_version"
              ],
              "expected_misses": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_hit_count": 1,
              "expected_total": 5,
              "expected_hit_rate": 0.2,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "Using **kwargs unpacking for StripeClient resource methods (e.g., self.client.customers.create(**customer_params)) \u2014 the newer StripeClient typically accepts a typed params dict as a positional argument rather than keyword expansion, though this may still work",
                "Exception classes like stripe.InvalidRequestError, stripe.CardError, stripe.APIError etc. are from the older module-level stripe API; the newer StripeClient-based SDK may raise slightly different exception types or namespace them differently, though they are still importable from stripe"
              ],
              "brief_assessment": "The code is entirely valid Python with good structure, type hints, docstrings, and comprehensive error handling. It correctly uses StripeClient with the pinned API version and covers all requested features (customer creation with email/metadata, subscription creation with price ID). The main concerns are: (1) the code is truncated at the end (cut off mid-exception handler), losing the final catch blocks and likely a convenience function; (2) the StripeClient resource methods are called with **kwargs unpacking rather than a params dict, which is a minor idiom mismatch with the newer client interface. Overall it demonstrates solid understanding of the task with minor API idiom deviations.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": true
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_misses": [
                "stripe\\.api_version"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "The StripeClient API using keyword arguments (email=email, customer=customer_id) may not match the newer StripeClient params-based interface which typically uses a params dict, though keyword arguments are also supported in some versions",
                "Exception attributes like e.message, e.param, e.code, e.decline_code, e.http_status are from the older stripe module-level API and may not all be present on exceptions raised by StripeClient"
              ],
              "brief_assessment": "The code is entirely valid Python with good structure, type hints, logging, and comprehensive error handling. It correctly uses StripeClient (the newer client-based API) with stripe_version pinning, and the general flow of creating a customer then a subscription is correct. However, the StripeClient's resource methods may expect a params dict rather than keyword arguments depending on the library version, and some exception attributes referenced (e.g., e.message, e.decline_code) are more associated with the older module-level API. The code is truncated at the end of create_customer_with_subscription, losing the cleanup logic.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": true
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": false
                }
              ],
              "expected_hits": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create"
              ],
              "expected_misses": [
                "stripe\\.api_version",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_hit_count": 3,
              "expected_total": 5,
              "expected_hit_rate": 0.6,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Python with correct syntax and idiomatic patterns. It uses the older `stripe.error.*` exception hierarchy (which was the standard before the newer `stripe` v2+ SDK introduced `stripe.StripeError` directly), but this is still valid and widely used. The code properly initializes the API version, creates customers with email/metadata, and creates subscriptions with a price ID, all with comprehensive error handling. The code is truncated at the `create_customer_with_subscription` convenience method, but the core required functionality (customer creation and subscription creation) is fully implemented. The docstrings claim returning None on failure but actually re-raise exceptions, which is a minor inconsistency.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": true
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": false
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": false
                }
              ],
              "expected_hits": [
                "stripe\\.api_version"
              ],
              "expected_misses": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_hit_count": 1,
              "expected_total": 5,
              "expected_hit_rate": 0.2,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "StripeClient's resource methods (e.g., client.customers.create) use positional dict 'params' rather than keyword arguments \u2014 passing email=email, metadata=metadata as kwargs is the pattern from the older module-level stripe.Customer.create() API, not the newer StripeClient API which expects a single params dict",
                "Similarly client.subscriptions.create(**subscription_params) unpacks keyword arguments, but the StripeClient API expects a params dict as a positional argument, e.g. client.subscriptions.create(params={...})",
                "Exception classes like stripe.InvalidRequestError, stripe.CardError, stripe.APIError, stripe.RateLimitError are from the older stripe module-level interface; the newer StripeClient raises stripe.error.* or stripe._error.* exceptions \u2014 though these still work, mixing old exception references with new StripeClient is a subtle contamination"
              ],
              "brief_assessment": "The code is entirely valid Python with good structure, type hints, docstrings, and comprehensive error handling. However, there is significant API contamination: the newer StripeClient API expects a `params` dict positional argument (e.g., `client.customers.create(params={\"email\": email})`), but the code uses keyword-argument patterns from the older module-level `stripe.Customer.create()` interface. This means the calls would likely fail at runtime. The code is also truncated at the very end (cut off mid-exception handler), causing a minor completeness issue.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": true
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_misses": [
                "stripe\\.api_version"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "Uses `stripe.error` module for exceptions (e.g., `stripe.error.CardError`, `stripe.error.InvalidRequestError`), which is the legacy module-level API pattern. The newer `StripeClient` class raises exceptions from `stripe._error` or accessed via `stripe.StripeError`, and the error attribute patterns like `e.message`, `e.param`, `e.code`, `e.decline_code` are from the older API style.",
                "Passes keyword arguments (`email=`, `customer=`, `items=`, `metadata=`) directly to `StripeClient` resource methods. The newer `StripeClient` approach in stripe-python v6+ uses `params` dict pattern, e.g., `self.client.customers.create(params={...})` \u2014 the keyword-arg style is from the older `stripe.Customer.create()` module-level API.",
                "The `create_customer` and `create_subscription` methods declare return type as `dict[str, Any]` but actually return Stripe resource objects (not plain dicts)."
              ],
              "brief_assessment": "The code is entirely valid Python with good structure, logging, and comprehensive error handling hierarchy. However, it mixes the newer `StripeClient` instantiation pattern with the older module-level exception imports from `stripe.error` and uses keyword-argument calling conventions (e.g., `email=email`) instead of the `params={}` dict style expected by `StripeClient`. The `create_customer_with_subscription` method is also truncated \u2014 it doesn't re-raise or return on failure, silently swallowing the error. Overall it demonstrates solid Python practices but has API idiom contamination between old and new stripe-python SDK styles.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "v1\\.customers\\.create|client\\.customers\\.create",
                  "matched": true
                },
                {
                  "pattern": "v1\\.subscriptions\\.create|client\\.subscriptions\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError",
                  "matched": false
                }
              ],
              "expected_hits": [
                "StripeClient",
                "v1\\.customers\\.create|client\\.customers\\.create",
                "v1\\.subscriptions\\.create|client\\.subscriptions\\.create"
              ],
              "expected_misses": [
                "stripe\\.api_version",
                "stripe\\.StripeError|stripe\\.CardError|stripe\\.InvalidRequestError"
              ],
              "expected_hit_count": 3,
              "expected_total": 5,
              "expected_hit_rate": 0.6,
              "anti_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Customer",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-02",
      "task_type": "cross_language",
      "target_language": "go",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Go with no foreign language patterns. It correctly uses the stripe-go v76 library with idiomatic patterns including package-level functions (customer.Get, customer.Update, paymentmethod.Attach), stripe.String() helpers, iterator patterns for listing, and proper error wrapping. The API version is set via stripe.APIVersion which is the correct approach, though wrapping a global-state library in a struct is somewhat misleading since the stripe-go library uses global configuration. The error code check for ErrorCodeResourceAlreadyExists may not match the actual Stripe error code for already-attached payment methods (which is typically 'resource_already_exists' but the constant name may differ). The code is truncated at the very end of main() but the core task functions are complete. Minor issue: the StripeClient wrapper gives a false impression of instance-based configuration when stripe-go uses globals.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [
                "v84 is an unusually high version number for stripe-go (current latest is around v81), suggesting possible hallucination of version number, though the API patterns themselves are correct"
              ],
              "brief_assessment": "The code is entirely in Go with proper idiomatic patterns. It correctly uses the stripe-go library's package-level functions (customer.Get, customer.Update), pointer helpers (stripe.String), CustomerInvoiceSettingsParams for setting the default payment method, and proper Stripe error type handling. The version number v84 is slightly ahead of actual releases but the API surface is accurate. The code is well-structured with comprehensive error handling, clear documentation, and even includes a useful alternative for attaching payment methods first.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "Using a fictional version 'v84' of stripe-go (latest stable versions are in the v70s-v80 range, but this is speculative rather than contamination)",
                "Setting stripe.Key as a global side effect in a constructor that also returns a Client wrapper is a mixed pattern - the Client struct wraps an apiKey but never uses it, since the library uses the global stripe.Key"
              ],
              "brief_assessment": "The code is entirely valid Go with proper idiomatic patterns including error wrapping, type assertions on Stripe errors, and correct use of the stripe-go package-level API (customer.Get, customer.Update, stripe.CustomerParams with InvoiceSettings). The main issues are: (1) the Client wrapper is somewhat misleading since it stores apiKey but relies on the global stripe.Key, making it not truly client-scoped (the stripe-go library does support per-client backends via stripe.BackendConfig but this code doesn't use that), and (2) the version 'v84' may not exist but this is a minor version number issue rather than contamination. The code would functionally accomplish the task of retrieving and updating a customer's default payment method.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Go with correct syntax and idiomatic patterns. It properly uses the stripe-go v76 library with the correct package-level API (customer.Get, customer.Update, paymentmethod.Attach, paymentmethod.List) and idiomatic helpers like stripe.String(). The functional implementation covers all three requested tasks (init client, retrieve customer, update default payment method) plus extras like listing payment methods and attaching before updating. Minor issues: the error code check for ErrorCodeResourceAlreadyExists may not be the exact code Stripe returns for already-attached payment methods (it's typically 'resource_already_exists' but the actual behavior differs), setting stripe.APIVersion directly is acceptable but slightly non-standard, and the advanced example is truncated mid-code. The wrapper struct around global state is a reasonable pattern but slightly misleading since stripe-go uses global config.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "Version v84 of stripe-go does not exist; current major versions are in the v70s-v80s range but the exact number suggests hallucination or confusion rather than cross-language contamination",
                "Using package-level stripe.Key for initialization rather than creating a stripe.BackendConfig or client instance - this is the older/simpler pattern but is valid",
                "ErrorTypeRateLimit and ErrorTypeAuthentication - these error type constants may not exist with those exact names in the Go SDK; they more closely mirror the Node.js/Python SDK error taxonomy",
                "The error type switch pattern with stripeErr.Type, stripeErr.Msg, stripeErr.Param, stripeErr.Code uses field names that partially reflect other SDK conventions - Go SDK uses Message not Msg in some versions"
              ],
              "brief_assessment": "The code is syntactically valid Go and follows a reasonable structure for the task. It correctly uses the stripe-go pattern of package-level functions (customer.Get, customer.Update), stripe.String() helpers, and CustomerInvoiceSettingsParams for setting the default payment method. However, there are contamination signals in the error handling section: the exact error type constants (ErrorTypeRateLimit, ErrorTypeAuthentication) and field names (Msg, Param) may not match the actual stripe-go API precisely, suggesting influence from other Stripe SDKs. The v84 version number is likely fabricated. Functionally, the code would accomplish the task if the API names resolve correctly.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "v84 is not a real stripe-go version (latest is around v81 at most, and commonly v76-v78); the package naming 'stripe' for the user's own package conflicts with the stripe-go import"
              ],
              "brief_assessment": "The code is entirely valid Go with no foreign language contamination. The stripe-go API usage is largely idiomatic \u2014 using `customer.Get`, `customer.Update`, `stripe.String()`, and `CustomerInvoiceSettingsParams` correctly matches the library's patterns. The version number v84 is fictional (no such release exists), and naming the user's own package 'stripe' creates a conflict with the imported stripe-go package that would prevent compilation. The functional logic of retrieving then updating the customer is correct, though the retrieval step is unnecessary since Update alone would suffice and would error if the customer doesn't exist.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Go with no foreign language patterns. It correctly uses the stripe-go/v76 library with idiomatic patterns including stripe.String() helpers, iterator-based list traversal, and proper error wrapping. The code fully accomplishes the task \u2014 initializing the client, retrieving a customer, and updating the default payment method \u2014 with useful extras like payment method attachment and listing. Minor issues: the custom StripeClient wrapper around global state is somewhat redundant (stripe-go uses global config by default), setting stripe.APIVersion directly is functional but slightly unusual (most users rely on the library default), and the error code check for ErrorCodeResourceAlreadyExists may not match the actual Stripe error code for already-attached payment methods. The second code block is truncated but the core task is fully complete in the first block.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 4,
              "contamination_signals": [
                "The import version 'v84' is unrealistically high - current stripe-go versions are around v76-v81, suggesting the version number may be hallucinated rather than reflecting a real release",
                "The error handling uses stripeErr.Type with constants like stripe.ErrorTypeRateLimit and stripeErr.DeclineCode - while these exist in various forms, some field names may not exactly match the current API surface"
              ],
              "brief_assessment": "The code is well-structured, entirely in Go, and demonstrates a solid understanding of the stripe-go library patterns. It correctly uses package-level functions (customer.Get, customer.Update, paymentmethod.Attach), stripe.String() helper functions, and proper struct-based params \u2014 all idiomatic for the stripe-go SDK. The main concern is the hallucinated version number (v84), though the API patterns themselves are correct. The code goes beyond the basic task by including payment method attachment verification, comprehensive error handling, and testing examples, making it functionally complete and well-organized.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "v84 is not a real stripe-go version (latest major versions are around v76-v81 range, but v84 doesn't exist as of training data); this suggests hallucinated version number",
                "Using global stripe.Key and package-level functions (customer.Get, customer.Update) is the older pattern; newer stripe-go versions encourage using client.API (stripe.NewBackendsHTTP) for proper client isolation, though the global pattern still works",
                "The package is named 'stripe' which would conflict with the imported stripe-go package 'stripe' - this is a naming collision issue"
              ],
              "brief_assessment": "The code is syntactically valid Go and uses a recognizable stripe-go API pattern with package-level functions (customer.Get, customer.Update) and stripe.CustomerParams with InvoiceSettings. However, it has a package naming conflict (declaring package stripe while importing github.com/stripe/stripe-go), uses a non-existent v84 version, and relies on the older global-key pattern rather than the per-client backend approach. The functional logic of retrieving then updating a customer's default payment method is correct, though the initial Get call is unnecessary since Update would fail on its own if the customer doesn't exist.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "github\\.com/stripe/stripe-go",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Key\\s*=",
                  "matched": true
                },
                {
                  "pattern": "customer\\.Get\\(",
                  "matched": true
                },
                {
                  "pattern": "func\\s+\\w+\\(",
                  "matched": true
                }
              ],
              "expected_hits": [
                "github\\.com/stripe/stripe-go",
                "stripe\\.Key\\s*=",
                "customer\\.Get\\(",
                "func\\s+\\w+\\("
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-03",
      "task_type": "similar_syntax",
      "target_language": "javascript",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely correct JavaScript/Node.js with idiomatic Express and Stripe SDK usage. It properly initializes Stripe with explicit API versioning via the options object, correctly uses express.raw() to preserve the raw body for webhook signature verification with stripeClient.webhooks.constructEvent(), and implements a clean event dispatching pattern via a handler map. The architecture is well-structured as a factory function, includes proper error handling, and the usage example correctly places express.raw() before express.json(). The only minor issue is the truncated PORT line at the end of app.js, but all three requested features are fully implemented.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": true
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "req\\.body",
                  "matched": true
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "require\\(['\"]stripe['\"]\\)",
                "apiVersion:\\s*['\"]",
                "req\\.body",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "stripe\\.webhooks\\.constructEvent"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 4,
              "contamination_signals": [
                "typescript: true option in Stripe constructor is a non-standard/unnecessary option for a JavaScript codebase",
                "API version '2026-01-28.clover' is a fabricated/hallucinated version string"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js and correctly implements all three requested features: Stripe initialization with explicit API versioning, webhook signature verification using raw body, and event dispatching to handler functions. The `typescript: true` option in the Stripe constructor is unnecessary and slightly misleading in a pure JS context, and the default API version string appears fabricated. The usage example is cut off at the end but the core middleware module is complete and functional. Overall solid quality with good error handling, catch-all handler support, and clear documentation.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": true
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": true
                },
                {
                  "pattern": "req\\.body",
                  "matched": true
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "require\\(['\"]stripe['\"]\\)",
                "apiVersion:\\s*['\"]",
                "stripe\\.webhooks\\.constructEvent",
                "req\\.body",
                "module\\.exports|export"
              ],
              "expected_misses": [],
              "expected_hit_count": 5,
              "expected_total": 5,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with no cross-language contamination. The Stripe API usage is idiomatic\u2014constructEvent, stripe-signature header, and raw body handling are all correct patterns. The API version string '2026-01-28.clover' is fictitious but structurally plausible. The custom raw body capture approach works but is less idiomatic than using express.raw() with a verify callback or express.json({ verify: ... }), which is the more standard Express pattern for Stripe webhooks. The final handler file is truncated mid-variable, losing a small portion of the example code, but all core task requirements (API versioning, signature verification, event dispatching) are fully implemented.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": true
                },
                {
                  "pattern": "req\\.body",
                  "matched": false
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "apiVersion:\\s*['\"]",
                "stripe\\.webhooks\\.constructEvent",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "require\\(['\"]stripe['\"]\\)",
                "req\\.body"
              ],
              "expected_hit_count": 3,
              "expected_total": 5,
              "expected_hit_rate": 0.6,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "typescript: true option passed to Stripe constructor is a TypeScript-related config, slightly odd in a pure JS context"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with proper Express and Stripe API usage. It correctly initializes Stripe with explicit API versioning, verifies webhook signatures using constructEvent with the raw body, and dispatches events via a handler map. Minor issues include the `typescript: true` option being unnecessary in a JS context, the slightly unusual pattern of using both `express.raw()` with a `verify` callback and then referencing `req.rawBody` (when the body is already available as `req.body` buffer after `express.raw()`), and the event handler examples being truncated at the end. Overall it's well-structured and functional.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": true
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "req\\.body",
                  "matched": false
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "require\\(['\"]stripe['\"]\\)",
                "apiVersion:\\s*['\"]",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "stripe\\.webhooks\\.constructEvent",
                "req\\.body"
              ],
              "expected_hit_count": 3,
              "expected_total": 5,
              "expected_hit_rate": 0.6,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "typescript: true option passed to Stripe constructor is not a standard/meaningful option in the Node.js SDK for plain JavaScript usage",
                "The use of both express.raw() with a verify callback AND storing req.rawBody is slightly redundant \u2014 when using express.raw(), req.body is already a Buffer, so constructEvent could use req.body directly"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js and correctly addresses all three requirements: Stripe initialization with explicit API versioning, webhook signature verification, and event dispatching based on type. The `typescript: true` option in the Stripe constructor is a minor oddity that doesn't belong in plain JS code and the raw body handling is slightly redundant (express.raw already provides the raw buffer as req.body), but these are minor issues. The code is well-structured, well-documented, and mostly production-ready, though the advanced usage section is truncated.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": true
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": true
                },
                {
                  "pattern": "req\\.body",
                  "matched": false
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "require\\(['\"]stripe['\"]\\)",
                "apiVersion:\\s*['\"]",
                "stripe\\.webhooks\\.constructEvent",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "req\\.body"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "API version string '2026-01-28.clover' appears fabricated/non-existent"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with proper use of Express middleware patterns and the Stripe Node.js SDK. The three core requirements (explicit API versioning, webhook signature verification via raw body, and event-type-based dispatch) are all implemented correctly. The code is truncated at the end \u2014 the app.js setup showing how captureRawBody integrates with express.raw() is cut off mid-line, which slightly impacts completeness. The captureRawBody function follows the express.json verify callback pattern correctly, though the more modern/common approach would be to use express.raw() directly on the webhook route. The fabricated API version string is a minor issue but doesn't affect the pattern's correctness.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": true
                },
                {
                  "pattern": "req\\.body",
                  "matched": true
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "apiVersion:\\s*['\"]",
                "stripe\\.webhooks\\.constructEvent",
                "req\\.body",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "require\\(['\"]stripe['\"]\\)"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with correct Express middleware patterns and proper Stripe SDK usage. The Stripe initialization with explicit `apiVersion`, `webhooks.constructEvent()` for signature verification, and event-type-based dispatching are all idiomatic. Minor concerns: the `captureRawBody` function concatenates as a string rather than using `express.raw()` or `express.json({ verify: ... })` which is the more standard approach; returning 500 instead of 200 on handler errors could cause Stripe retries contrary to the comment's intent. The usage example is truncated mid-handler, but the core middleware implementation is complete and functional.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": true
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "req\\.body",
                  "matched": true
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "require\\(['\"]stripe['\"]\\)",
                "apiVersion:\\s*['\"]",
                "req\\.body",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "stripe\\.webhooks\\.constructEvent"
              ],
              "expected_hit_count": 4,
              "expected_total": 5,
              "expected_hit_rate": 0.8,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [
                "typescript: true option passed to Stripe constructor is a TypeScript-specific option that has no effect in plain JavaScript",
                "API version '2026-01-28.clover' is a fictitious/futuristic version string, though the pattern of passing apiVersion is correct"
              ],
              "brief_assessment": "The code is well-structured, idiomatic JavaScript/Node.js using Express and the Stripe Node SDK correctly. It properly handles raw body parsing for webhook signature verification, uses stripe.webhooks.constructEvent() correctly, and implements a clean event dispatching system with wildcard support and idempotency helpers. The only minor issues are the `typescript: true` option (a TypeScript-specific config passed in plain JS context) and a fictitious API version string. The usage example is truncated mid-handler, but the core middleware implementation is complete and production-quality.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": true
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": true
                },
                {
                  "pattern": "req\\.body",
                  "matched": true
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "require\\(['\"]stripe['\"]\\)",
                "apiVersion:\\s*['\"]",
                "stripe\\.webhooks\\.constructEvent",
                "req\\.body",
                "module\\.exports|export"
              ],
              "expected_misses": [],
              "expected_hit_count": 5,
              "expected_total": 5,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "The API version string '2026-01-28.clover' is fabricated/non-existent, though this is more of a factual error than cross-language contamination",
                "Manual raw body capture via req.on('data') instead of using express.raw() which is the more idiomatic Express approach for this exact use case"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with proper Express patterns. It correctly implements all three requested features: Stripe initialization with API versioning, webhook signature verification using raw body, and event dispatching via a handler registry. The manual raw body capture approach works but is less idiomatic than using express.raw({type: 'application/json'}) for the webhook route; also, the captureRawBody middleware may conflict with express.json() since it consumes the stream. The last code block is truncated. The fabricated API version string is a minor factual issue but not a language contamination problem.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "apiVersion:\\s*['\"]",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": true
                },
                {
                  "pattern": "req\\.body",
                  "matched": false
                },
                {
                  "pattern": "module\\.exports|export",
                  "matched": true
                }
              ],
              "expected_hits": [
                "apiVersion:\\s*['\"]",
                "stripe\\.webhooks\\.constructEvent",
                "module\\.exports|export"
              ],
              "expected_misses": [
                "require\\(['\"]stripe['\"]\\)",
                "req\\.body"
              ],
              "expected_hit_count": 3,
              "expected_total": 5,
              "expected_hit_rate": 0.6,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "stripe_version=",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Webhook",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-04",
      "task_type": "grounded",
      "target_language": "python",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python using the correct stripe Python SDK patterns with no cross-language contamination. The API version string and Stripe.js script tag path are updated correctly from acacia/basil to clover. The functional score is slightly reduced because the task asked to 'replace any deprecated patterns' yet the response simply states none were found without demonstrating any investigation or potential updates (e.g., newer parameter names, return_url vs success_url changes, etc.) \u2014 this could be correct if no deprecations exist, but given these are fictional API versions it's hard to fully verify. The code quality is good with helpful documentation and recommendations, though it lacks error handling in the code itself.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": true
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [],
              "expected_hit_count": 3,
              "expected_total": 3,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Python with no cross-language contamination. It correctly upgrades to the new StripeClient pattern (introduced in stripe-python v7+), which uses `client.checkout.sessions.create()` instead of the older global `stripe.checkout.Session.create()` \u2014 this is the idiomatic modern Python SDK pattern. The API version string and Stripe.js script tag are both properly updated from acacia/basil to clover. The code also provides excellent supplementary guidance including error handling, environment variable usage, and the alternative global configuration pattern.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": true
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [],
              "expected_hit_count": 3,
              "expected_total": 3,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python with no cross-language contamination. The migration from the global `stripe` module pattern to `StripeClient` is the correct idiomatic upgrade path that Stripe recommends, and `client.checkout.sessions.create()` matches the StripeClient API. The functional correctness is strong\u2014it updates the API version, replaces deprecated global config with StripeClient, updates the method call pattern, and updates the Stripe.js script tag. Minor deduction on functional correctness because the specific version names (clover, acacia) and API dates are fabricated/speculative, so we can't fully verify correctness of the upgrade path, but the structural changes are all appropriate. The explanatory notes and testing recommendations add excellent production-quality context.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": false
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]"
              ],
              "expected_hit_count": 2,
              "expected_total": 3,
              "expected_hit_rate": 0.6666666666666666,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python using the idiomatic stripe Python SDK. The API version string and Stripe.js script tag are correctly updated from acacia/basil to clover. Since the task involves a fictional API version upgrade (2026-01-28.clover doesn't exist yet), it's impossible to verify whether deprecated patterns were truly addressed or if the checkout session creation code would need changes \u2014 the code essentially just swaps version strings and assumes no breaking changes. The notes and recommendations are helpful but the code doesn't demonstrate any actual deprecated-pattern replacements, which was part of the task request.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": true
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [],
              "expected_hit_count": 3,
              "expected_total": 3,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Python (and HTML/JS for the frontend portion) with no cross-language contamination. The upgrade from the global `stripe.api_key` pattern to the `StripeClient` instance pattern is a legitimate and idiomatic modernization of the Stripe Python SDK. The API version and Stripe.js script tag are correctly updated. The `client.checkout.sessions.create` call uses the newer StripeClient method naming convention (`.sessions.create` vs `.Session.create`), which is appropriate. Minor concern: since these are fictional API versions, it's hard to verify if `StripeClient` constructor accepts `stripe_version` as a keyword argument (it may be `api_version` in some SDK versions), and `e.user_message` on exceptions is not the standard attribute (`str(e)` or `e.user_message` may vary). The `idempotency_key` as a direct parameter to `create()` may not be the correct pattern \u2014 in the StripeClient SDK it's typically passed via options. Overall the code is well-structured, well-documented, and goes above and beyond with error handling, testing examples, and migration guidance.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": true
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [],
              "expected_hit_count": 3,
              "expected_total": 3,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python with no cross-language contamination. The migration from the global `stripe` module pattern to `StripeClient` is the correct modern idiomatic approach for the Python SDK, and `client.checkout.sessions.create()` matches the StripeClient API surface. Since these are fictional API versions, functional correctness cannot be fully verified, but the upgrade patterns (StripeClient migration, script tag version update) are reasonable and well-documented. The code is clean, well-commented, and includes helpful migration notes. Minor deduction on functional correctness because we can't confirm all deprecated patterns were addressed or that no other breaking changes exist between the fictional versions.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": false
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]"
              ],
              "expected_hit_count": 2,
              "expected_total": 3,
              "expected_hit_rate": 0.6666666666666666,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The Python code is entirely correct in language and uses the idiomatic stripe Python SDK API. The version string and Stripe.js script tag are properly updated from acacia/basil to clover. The code loses a point on functional correctness because the task asked to 'replace any deprecated patterns' but the response simply states none were found without demonstrating any investigation or awareness of potential API changes between these versions (e.g., changes to checkout session parameters). The included JavaScript snippet for Stripe initialization is a reasonable addition but is minor supplementary content, not contamination.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": true
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [],
              "expected_hit_count": 3,
              "expected_total": 3,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Python with no cross-language contamination. It correctly upgrades the API version from 2024-12-18.acacia to 2026-01-28.clover, adopts the newer StripeClient pattern (which is the idiomatic modern approach in the stripe-python SDK with `client.checkout.sessions.create()`), updates the Stripe.js script tag from basil to clover, and provides thorough documentation of changes. The additional recommendations for error handling, environment variables, and testing add production-quality value.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": true
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [],
              "expected_hit_count": 3,
              "expected_total": 3,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [
                "The `params={}` keyword wrapping in `client.checkout.sessions.create(params={...})` may reflect patterns from other SDKs or incorrect understanding of the Python StripeClient API, which typically accepts keyword arguments directly rather than a params dict"
              ],
              "brief_assessment": "The code correctly upgrades from the old global-state pattern to the newer StripeClient approach, which is a legitimate and recommended migration path in the Stripe Python SDK. The API version string and Stripe.js script tag are properly updated. The main concern is the `params={}` dictionary wrapping \u2014 the Python StripeClient's `create()` method actually does accept a `params` dict, so this is technically valid but less idiomatic than passing keyword arguments directly. Overall the code is well-structured with good documentation of changes.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]",
                  "matched": false
                },
                {
                  "pattern": "js\\.stripe\\.com/clover/stripe\\.js",
                  "matched": true
                }
              ],
              "expected_hits": [
                "2026-01-28\\.clover",
                "js\\.stripe\\.com/clover/stripe\\.js"
              ],
              "expected_misses": [
                "stripe\\.api_version\\s*=\\s*['\"]2026-01-28\\.clover['\"]"
              ],
              "expected_hit_count": 2,
              "expected_total": 3,
              "expected_hit_rate": 0.6666666666666666,
              "anti_results": [
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "basil",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe\\.api_version",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia",
                "basil"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.5,
              "contamination_detected": true
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-05",
      "task_type": "adjacent_domain",
      "target_language": "ruby",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely idiomatic Ruby/Rails with correct usage of the Stripe Ruby gem API (Stripe::Webhook.construct_event, event.data.object, etc.). It handles all three required webhook events, verifies signatures, and updates database records. However, the code is clearly truncated \u2014 the handle_status_change method is cut off mid-implementation, and likely revoke_subscription_access and the associated controller/migration are missing. The overall structure, error handling, and use of Rails patterns (deliver_later, find_or_initialize_by, assign_attributes) are well done.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely idiomatic Ruby with proper use of the Stripe Ruby gem API (Stripe::Webhook.construct_event, event.data.object, etc.) and Rails conventions (service object pattern, ActiveRecord, keyword arguments, Rails.logger). It correctly handles all three subscription lifecycle events, verifies the webhook signature, and updates local database records. The code is truncated at the end (handle_subscription_activated is cut off, and helper methods like extract_plan_id, extract_quantity, handle_subscription_cleanup are not defined), which prevents a perfect functional correctness score. The overall structure and error handling are production-quality with good practices like soft deletes and fallback creation on update when record is missing.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Ruby with idiomatic Rails patterns. The Stripe gem API usage (Stripe::Webhook.construct_event, event.data.object, event.type) is correct and idiomatic for the Ruby Stripe SDK. The code handles all three requested subscription events with proper signature verification. Minor issues: it depends on undefined base classes (ApplicationService, ServiceResult) whose implementations are cut off/missing, and the `with_error_handling` block wrapping a rescue at the method level is redundant/unclear. The overall architecture (service object, controller, model with validations and scopes) is well-structured but incomplete due to the truncated ServiceResult file.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely idiomatic Ruby with proper use of the Stripe Ruby gem API (Stripe::Webhook.construct_event, event.data.object, etc.) and Rails conventions (service object pattern, keyword arguments, ActiveRecord, deliver_later, Rails.logger). It handles all three required webhook events with signature verification and local database updates. The only issue is that the controller implementation is truncated mid-line, leaving the webhook endpoint incomplete, though the core service class is fully realized and production-quality.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely idiomatic Ruby/Rails with correct usage of the Stripe Ruby SDK (Stripe::Webhook.construct_event, event.data.object, etc.) and ActiveRecord patterns. It handles all three requested webhook events with signature verification, event parsing, and database updates. The code is truncated at the end \u2014 the handle_status_change method is cut off mid-line \u2014 which prevents it from scoring a 5 on functional correctness and code quality, but the vast majority of the task is fully implemented. No cross-language contamination is detected.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Ruby with idiomatic Rails patterns. It correctly uses the Stripe Ruby gem's `Stripe::Webhook.construct_event` for signature verification and handles all three required subscription lifecycle events. The code is truncated (controller's `create` action is incomplete, and supporting files like the migration, ApplicationService base class, and ServiceResult are missing), which prevents it from being fully production-ready. The custom ServiceResult/ApplicationService pattern with `.call` is a reasonable Ruby service object convention, though it assumes infrastructure not shown. Overall well-structured with proper error handling, logging, and validation.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "This is excellent, idiomatic Ruby code that fully accomplishes the task. It correctly uses the Stripe Ruby gem's API (Stripe::Webhook.construct_event, event.data.object, accessing subscription fields via dot notation), follows Ruby conventions (keyword arguments, bang methods, safe navigation operator, frozen constants), and implements all three required webhook events with proper signature verification. The code is well-structured with comprehensive error handling, custom exception hierarchy, status change tracking, user notification hooks, and access management \u2014 all organized cleanly as a service object pattern common in Rails applications.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely idiomatic Ruby with correct use of the Stripe Ruby SDK (Stripe::Webhook.construct_event, accessing event.data.object, subscription.items.data.first&.price&.id, etc.) and Rails conventions (find_or_initialize_by, assign_attributes, update!, Rails.logger). It handles all three requested event types with signature verification and local DB updates. The code is truncated mid-method (handle_subscription_deleted is cut off, and helper methods like grant_subscription_access, revoke_subscription_access, handle_status_transition, and active_status? are missing), which prevents a perfect functional correctness score. Overall it is well-structured, well-logged, and production-oriented.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "ApplicationService base class with `.call` class method pattern is common but not standard Rails \u2014 the service inherits from ApplicationService and uses `with_error_handling` which is assumed but never defined",
                "ServiceResult pattern resembles patterns more commonly seen in other ecosystems though it is used in Ruby too"
              ],
              "brief_assessment": "The code is entirely valid Ruby with idiomatic Rails patterns. It correctly uses the Stripe Ruby SDK's `Stripe::Webhook.construct_event` for signature verification and properly handles the three subscription lifecycle events. Minor issues include: the migration file is truncated, `ApplicationService` with its `call` class method and `with_error_handling` are assumed but never defined, and `logger` usage inside a plain service object (not a controller or ActiveJob) would need explicit setup. The rescue clause for `SignatureVerificationError` sits outside the `with_error_handling` block in `call`, which creates a potential structural issue if `with_error_handling` also rescues exceptions. Overall, this is well-structured, comprehensive Ruby code with good separation of concerns.",
              "cached": true
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Webhook\\.construct_event",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                },
                {
                  "pattern": "customer\\.subscription\\.",
                  "matched": true
                },
                {
                  "pattern": "def\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Webhook\\.construct_event",
                "class\\s+\\w+",
                "customer\\.subscription\\.",
                "def\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.webhooks\\.constructEvent",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 4,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-06",
      "task_type": "grounded",
      "target_language": "python",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code correctly migrates from the legacy global stripe module pattern to the new StripeClient pattern in Python. The API usage is largely idiomatic \u2014 `StripeClient`, `client.payment_intents.create()`, `client.refunds.create()`, and `stripe_version` parameter are all correct for the Python SDK. The use of `params=` as a keyword argument wrapping a dict is consistent with the new StripeClient Python SDK's documented calling convention. The code preserves all original business logic, adds proper type hints, improved the `amount_cents is not None` check over the original truthy check, and is well-documented with docstrings and usage examples. The wrapping in a class is a nice architectural improvement for testability and thread safety.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": false
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [
                "2026-01-28\\.clover"
              ],
              "expected_hit_count": 3,
              "expected_total": 4,
              "expected_hit_rate": 0.75,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Python with no cross-language contamination. It correctly migrates to the StripeClient pattern using `client.payment_intents.create(params={...})` and `client.refunds.create(params=params)`, which matches the new Python SDK's interface. The API version string '2026-01-28.clover' appears fabricated (no such version exists as of known releases), but the pattern itself is correct. A minor improvement is the fix from `if amount_cents:` to `if amount_cents is not None:`, which correctly handles a zero-amount edge case. The code also includes good documentation, testing examples, and clear explanation of changes.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "2026-01-28\\.clover",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely correct Python with no foreign language patterns. It properly migrates from the legacy module-level stripe pattern to the new StripeClient pattern, using `client.payment_intents.create()` and `client.refunds.create()` which follows the idiomatic Python SDK usage. The newer stripe Python SDK's StripeClient actually uses a params dict pattern (e.g., `client.payment_intents.create(params={...})`) rather than keyword arguments directly, which is a minor API deviation. The refund function also correctly fixes the original's bug by checking `is not None` instead of truthiness. The fabricated API version '2026-01-28.clover' is a minor concern but doesn't affect functional correctness of the pattern itself. Overall this is high-quality, well-documented code.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "2026-01-28\\.clover",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": false
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "stripe\\.PaymentIntent\\.create"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code correctly migrates from the legacy global-state Stripe pattern to the new StripeClient pattern in Python. It uses `StripeClient(api_key=..., stripe_version=...)` correctly, calls `client.payment_intents.create(params={...})` and `client.refunds.create(params=...)` which matches the Python StripeClient SDK's idiomatic usage. The business logic is fully preserved including the conditional partial refund amount check (improved with `is not None`). The wrapping in a class with type hints and docstrings is a quality improvement over the original.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": false
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [
                "2026-01-28\\.clover"
              ],
              "expected_hit_count": 3,
              "expected_total": 4,
              "expected_hit_rate": 0.75,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [
                "The stripe_version value '2026-01-28.clover' appears fabricated - no such version exists as of known Stripe API versions",
                "Error import paths use `stripe.error` which is correct for older stripe-python but the newer StripeClient pattern uses `stripe` directly for exceptions in some versions - minor ambiguity"
              ],
              "brief_assessment": "The code correctly migrates from the legacy global-state Stripe pattern to the new StripeClient pattern in idiomatic Python. The use of `client.payment_intents.create(params={...})` matches the documented StripeClient API for stripe-python. The fabricated API version string ('2026-01-28.clover') is a minor concern but doesn't affect the structural correctness. The bug fix changing `if amount_cents` to `if amount_cents is not None` is a genuine improvement. The additional production-ready version with error handling adds good value, though error import paths may vary by stripe-python version.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "2026-01-28\\.clover",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in Python with no foreign language patterns. It correctly migrates to the StripeClient pattern using `client.payment_intents.create()` and `client.refunds.create()`, which matches the modern Python Stripe SDK's service-based API. The constructor parameter `stripe_version` is plausible for the Python SDK (the actual kwarg name may vary slightly between SDK versions, but this is a reasonable and idiomatic approach). The business logic is fully preserved, with a minor improvement: the refund function now correctly checks `amount_cents is not None` instead of the truthy check, which properly handles edge cases. The addition of type hints, docstrings, and logging enhances production quality. The only minor note is the fabricated API version string '2026-01-28.clover', but this is a reasonable placeholder for the upgrade scenario.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "2026-01-28\\.clover",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "stripe\\.PaymentIntent\\.create",
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.4,
              "contamination_detected": true
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code correctly migrates from the legacy global stripe module pattern to the new StripeClient pattern in Python. The use of `StripeClient`, `self.client.payment_intents.create(params={...})`, and `self.client.refunds.create(params=params)` follows the documented Python SDK pattern. The `stripe_version` constructor parameter is correct. One minor note: the new StripeClient Python SDK typically accepts `params` as a dict argument, which is exactly what's done here. The code also improves upon the original by fixing the truthy check (`if amount_cents` \u2192 `if amount_cents is not None`), wrapping everything in a well-documented class with type hints, and preserving all business logic faithfully.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": false
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [
                "2026-01-28\\.clover"
              ],
              "expected_hit_count": 3,
              "expected_total": 4,
              "expected_hit_rate": 0.75,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [
                "The `stripe_version` parameter name may not be correct \u2014 the Python StripeClient constructor uses `stripe_version` which appears correct per recent SDK docs, though some SDK versions use `stripe_account` style kwargs",
                "The `params=` keyword argument wrapping is consistent with the newer Python SDK pattern but the exact API shape (using a `params` dict vs. direct keyword arguments) could reflect confusion with other SDK languages like Node.js where `params` objects are more common \u2014 however, the Python stripe v10+ SDK does use `params={}` pattern"
              ],
              "brief_assessment": "The code is entirely valid Python with no syntax from other languages. It correctly migrates from the legacy global `stripe.api_key` pattern to the `StripeClient` instance-based pattern, converting `stripe.PaymentIntent.create()` to `client.payment_intents.create(params={...})` and similarly for refunds. The `params={}` wrapping pattern is consistent with the newer stripe-python SDK's StripeClient interface. The API version string '2026-01-28.clover' is fabricated (a future date), which is a minor concern but doesn't affect functional correctness of the pattern. The code also improves on the original by fixing the `if amount_cents` check to `if amount_cents is not None` (correctly handling 0). The additional production-ready class version with error handling and logging adds good value.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "2026-01-28\\.clover",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.2,
              "contamination_detected": true
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely correct Python with no foreign language patterns. It properly migrates from the legacy module-level stripe pattern to the new StripeClient pattern, using `client.payment_intents.create()` and `client.refunds.create()` which match the Python SDK's StripeClient API. The parameter passing style using keyword arguments with dict unpacking is idiomatic. The code preserves all business logic, adds helpful improvements (type hints, logging, better None check, docstrings), and is production-quality. The only minor note is that the API version '2026-01-28.clover' appears fabricated (future date), but the pattern itself is correct. The StripeClient constructor parameter `stripe_version` is the correct Python SDK parameter name.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "StripeClient",
                  "matched": true
                },
                {
                  "pattern": "2026-01-28\\.clover",
                  "matched": true
                },
                {
                  "pattern": "payment_intents\\.create|v1\\.payment_intents\\.create",
                  "matched": true
                },
                {
                  "pattern": "refunds\\.create|v1\\.refunds\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "StripeClient",
                "2026-01-28\\.clover",
                "payment_intents\\.create|v1\\.payment_intents\\.create",
                "refunds\\.create|v1\\.refunds\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 4,
              "expected_total": 4,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.PaymentIntent\\.create",
                  "matched": true
                },
                {
                  "pattern": "stripe\\.Refund\\.create",
                  "matched": false
                },
                {
                  "pattern": "2024-12-18\\.acacia",
                  "matched": true
                },
                {
                  "pattern": "require\\(['\"]stripe['\"]\\)",
                  "matched": false
                },
                {
                  "pattern": "Stripe::PaymentIntent",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "stripe\\.PaymentIntent\\.create",
                "2024-12-18\\.acacia"
              ],
              "anti_pattern_hit_count": 2,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.4,
              "contamination_detected": true
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-07",
      "task_type": "adjacent_domain",
      "target_language": "javascript",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely correct JavaScript/Node.js with no foreign language patterns. It uses the Stripe Node.js SDK idiomatically \u2014 `stripe.accounts.create()`, `stripe.accountLinks.create()`, and `stripe.accounts.retrieve()` are all correct API calls with proper parameter naming (snake_case for Stripe API fields, camelCase for JS variables). The module fully accomplishes the task: it creates an Express account with card_payments and transfers capabilities, generates an onboarding link, and includes helpful extras like account status retrieval and link refreshing. The code is well-structured with JSDoc comments, proper error handling, and a clean module export pattern.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with no cross-language contamination. It correctly uses the Stripe Node.js SDK to create an Express account with card_payments and transfers capabilities, then generates an onboarding link via accountLinks.create. The API version string '2026-01-28.clover' is fabricated/incorrect (no such version exists), which is a minor concern but the task asked for 'current' version and the pattern is correct. The module is well-structured with JSDoc, error handling, and useful helper functions, though it includes some unnecessary fields (like passing null values in business_profile) and the usage example is truncated.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js using ES module syntax with the official Stripe Node.js SDK idiomatically. All three requested features (Express account creation, capability requests for card_payments and transfers, onboarding link generation) are fully implemented, plus useful bonus functions. The API version string '2026-01-28.clover' is fabricated/hallucinated rather than reflecting a real current Stripe API version, which is a minor idiomaticity concern but not a cross-language contamination issue. Error handling and code organization are production-quality.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in idiomatic Node.js JavaScript using the correct Stripe Node.js SDK (`stripe` npm package). All API calls\u2014`stripe.accounts.create`, `stripe.accountLinks.create`, `stripe.accounts.retrieve`\u2014use the correct method signatures and parameter names (snake_case as expected by the Stripe Node SDK). The module fully accomplishes the task: it creates an Express account with `card_payments` and `transfers` capabilities requested, generates an onboarding account link, and provides helpful utility functions. The code is well-structured, properly documented with JSDoc, includes error handling, and follows a clean modular pattern. The usage example is slightly truncated but this does not affect the module itself.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 4,
              "contamination_signals": [
                "The API version '2026-01-28.clover' appears to be a hallucinated/fabricated version string rather than a real Stripe API version"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with no cross-language contamination. It correctly uses the Stripe Node.js SDK to create an Express account with card_payments and transfers capabilities, then generates an onboarding link via accountLinks.create. The API usage is idiomatic for the stripe npm package, though the hardcoded API version string '2026-01-28.clover' is fabricated (not a real Stripe version). The module is well-structured with JSDoc, error handling, and helpful utility functions beyond the core requirement. The usage example is truncated but the main module is complete.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js using ES module syntax. The Stripe Node.js SDK usage is idiomatic \u2014 `stripe.accounts.create()`, `stripe.accountLinks.create()`, parameter naming with snake_case matching the Stripe API \u2014 all correct. The only notable issue is the fabricated API version string '2026-01-28.clover', which is not a real Stripe API version (the task said 'current' version). This is a hallucination but doesn't indicate cross-language contamination. The module fully accomplishes the task: creates an Express account with card_payments and transfers capabilities, generates an onboarding link, and provides a convenient combined function. Code quality is excellent with JSDoc, error handling, and a clean modular structure.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely in idiomatic Node.js JavaScript, using the correct stripe npm package API with proper snake_case parameter names matching the Stripe Node.js SDK (e.g., refresh_url, return_url, card_payments, business_type). It fully accomplishes all three requested tasks: creating an Express account, requesting card_payments and transfers capabilities, and generating an onboarding link. The module is well-structured with JSDoc comments, proper error handling, helpful utility functions (checkAccountStatus, refreshOnboardingLink), and clean module.exports \u2014 production-quality code.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 5,
              "code_quality": 4,
              "contamination_signals": [
                "API version '2026-01-28.clover' appears fabricated/hallucinated rather than being a real current Stripe API version"
              ],
              "brief_assessment": "The code is entirely valid JavaScript/Node.js with no cross-language contamination. It correctly uses the Stripe Node.js SDK to create an Express account with card_payments and transfers capabilities, then generates an onboarding account link \u2014 fully accomplishing the task. The API usage is idiomatic for the stripe npm package, though the API version string '2026-01-28.clover' is clearly hallucinated (not a real Stripe version). The code is well-structured with JSDoc, input validation, error handling, and useful helper functions, though the usage example is truncated.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 5,
              "functional_correctness": 5,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely correct JavaScript/Node.js using ES module syntax. It uses the Stripe Node.js SDK idiomatically \u2014 stripe.accounts.create(), stripe.accountLinks.create(), stripe.accounts.retrieve() \u2014 all with the correct parameter shapes (snake_case keys matching the Stripe API). The module fully accomplishes the task: creates an Express account with card_payments and transfers capabilities, then generates an onboarding link. It also adds useful bonus functions (getAccountStatus, refreshOnboardingLink), proper error handling, JSDoc documentation, and a clean return structure. The only minor quibble is the fabricated future API version string '2026-01-28.clover', but the task asked for 'current' which is inherently time-dependent, and the pattern is valid.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "accounts\\.create",
                  "matched": true
                },
                {
                  "pattern": "capabilities",
                  "matched": true
                },
                {
                  "pattern": "card_payments",
                  "matched": true
                },
                {
                  "pattern": "transfers",
                  "matched": true
                },
                {
                  "pattern": "requested:\\s*true",
                  "matched": true
                },
                {
                  "pattern": "accountLinks\\.create|account_links\\.create",
                  "matched": true
                }
              ],
              "expected_hits": [
                "accounts\\.create",
                "capabilities",
                "card_payments",
                "transfers",
                "requested:\\s*true",
                "accountLinks\\.create|account_links\\.create"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.api_version\\s*=",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "Stripe::Account",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.Account\\.create",
                  "matched": false
                },
                {
                  "pattern": "create_account",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 5,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        }
      ]
    },
    {
      "task_id": "upgrade-stripe-targeted-08",
      "task_type": "adjacent_domain",
      "target_language": "ruby",
      "runs": [
        {
          "run_index": 0,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Ruby with no foreign language patterns. The Stripe Billing MeterEvent API usage is largely correct \u2014 `Stripe::Billing::MeterEvent.create` with `event_name`, `payload` (including `stripe_customer_id` and `value`), and `timestamp` matches the Ruby SDK. Minor concerns: `event.identifier` and `event.created` may not be the exact attribute names on the MeterEvent response object (the actual response attributes may differ slightly), and converting `value` to a string is a minor deviation. Overall the code is well-structured, thoroughly documented, includes comprehensive error handling, and would accomplish the stated task.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": true
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Billing::MeterEvent",
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": true
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "Billing::MeterEvent\\.create\\("
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.16666666666666666,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "The StripeClient constructor pattern `Stripe::StripeClient.new(api_key, stripe_version: version)` followed by `@client.billing.meter_events.create(params, options)` resembles the newer thin-client pattern but mixes conventions - the Ruby SDK's StripeClient service-based access uses slightly different initialization and method signatures than shown",
                "The `event.identifier` attribute access may be borrowed from another SDK - Ruby Stripe objects typically use `event.id` or similar standard attribute names",
                "The `api_version: '2026-01-28.clover'` is a fabricated/hallucinated API version that doesn't exist"
              ],
              "brief_assessment": "The code is entirely valid Ruby with good structure, documentation, and comprehensive error handling. It uses the newer Stripe Ruby SDK's StripeClient pattern for service-based access (`@client.billing.meter_events.create`), which is directionally correct but has some subtle API usage issues: the StripeClient constructor signature may not exactly match the real SDK, `event.identifier` is likely not the correct attribute name, and the API version string is fabricated. The code is unfortunately truncated mid-method (the `handle_authentication_error` method is cut off), leaving the class incomplete.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": true
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Billing::MeterEvent",
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "The StripeClient instantiation pattern with positional secret key argument and keyword stripe_version is not how the Ruby SDK works - StripeClient.new takes a config block or hash, not positional args",
                "The chained method call @stripe_client.billing.meter_events.create() resembles the Python/Node SDK's service-based access pattern rather than the Ruby SDK's traditional Stripe::Billing::MeterEvent.create() class method pattern",
                "The stripe_version '2026-01-28.clover' is a fabricated/hallucinated version string",
                "The timestamp parameter is passed as a top-level keyword arg rather than inside the payload, which may reflect confusion with other SDK patterns"
              ],
              "brief_assessment": "The code is syntactically valid Ruby and follows reasonable Rails service object conventions. However, the Stripe API usage shows contamination from other language SDKs \u2014 particularly the `@stripe_client.billing.meter_events.create()` chained service pattern, which is characteristic of the Python or Node Stripe SDKs rather than the Ruby gem's traditional `Stripe::Billing::MeterEvent.create()` class method approach. The Ruby SDK does support a newer StripeClient interface, but the constructor signature and parameter passing shown here don't match the actual Ruby SDK's interface. The error handling structure and overall class design are well-organized, though the reliance on assumed ApplicationService/ServiceResult base classes limits standalone usability.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": false
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [
                "Stripe::Billing::MeterEvent"
              ],
              "expected_hit_count": 5,
              "expected_total": 6,
              "expected_hit_rate": 0.8333333333333334,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 1,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Ruby with idiomatic patterns (keyword arguments, custom exceptions, structured return hashes). The Stripe API usage is largely correct \u2014 `Stripe::Billing::MeterEvent.create` with `event_name`, `payload`, and `timestamp` matches the current Ruby SDK. Minor concerns: `event.identifier` may not be the correct attribute name (it could be `event.id` or `event.identifier` depending on the exact API response shape), and converting `value` to a string may not be necessary. The code is well-structured with thorough error handling, input validation, and clear documentation, making it production-quality.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": true
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Billing::MeterEvent",
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": true
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "Billing::MeterEvent\\.create\\("
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.16666666666666666,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 4,
              "api_idiomaticity": 3,
              "functional_correctness": 3,
              "code_quality": 3,
              "contamination_signals": [
                "Structured logging with keyword arguments (e.g., @logger.info('message', customer_id: ..., token_count: ...)) is not standard Ruby Logger API \u2014 resembles structured logging from other ecosystems (e.g., Python's structlog or Node.js structured loggers)",
                "Stripe::StripeClient instantiation with positional api_key and stripe_version keyword \u2014 the newer Ruby SDK does support StripeClient but the exact constructor signature (positional key + stripe_version kwarg) may reflect patterns from other SDK versions or languages",
                "@client.billing.meter_events.create(params, options) \u2014 the service-based client pattern is relatively new in the Ruby SDK but the two-argument form (params, options) with options containing idempotency_key may reflect Python SDK patterns where options are passed separately",
                "event.identifier \u2014 Stripe Ruby objects typically don't have an 'identifier' attribute; this may be confused with Python SDK or other language patterns (Ruby would typically use event.id)"
              ],
              "brief_assessment": "The code is syntactically valid Ruby and demonstrates a well-structured class with error handling, retry logic, and input validation. However, it shows several contamination signals: the structured logging style with keyword arguments doesn't match Ruby's standard Logger interface, `event.identifier` is not a standard Stripe Ruby SDK attribute (should be `event.id`), and the code is truncated mid-method (cut off in `handle_authentication_error`), leaving multiple referenced private methods unimplemented. The newer StripeClient service-based API pattern is partially correct but some details appear influenced by other SDK conventions.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": true
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Billing::MeterEvent",
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "stripe_client.billing.meter_events.create() uses the new StripeClient resource-based pattern which resembles Python/Node SDK patterns more than the traditional Ruby SDK pattern (Stripe::Billing::MeterEvent.create)",
                "Stripe::StripeClient.new(api_key, stripe_version:) constructor pattern - the Ruby stripe gem's StripeClient does accept this but the resource-chaining pattern (stripe_client.billing.meter_events.create) is modeled after the newer Python/Node SDK interfaces and may not be fully stable/idiomatic in the Ruby gem",
                "The API version '2026-01-28.clover' is fabricated/futuristic, suggesting hallucination rather than cross-language contamination per se",
                "ServiceResult and ApplicationService are assumed framework patterns not part of standard Ruby/Rails - while not contamination, they add untestable dependencies"
              ],
              "brief_assessment": "The code is syntactically valid Ruby and demonstrates solid structure with input validation, granular error handling, and logging. However, the Stripe API usage follows the newer resource-based client pattern (stripe_client.billing.meter_events.create) which, while technically available in recent versions of the Ruby gem, more closely mirrors Python/Node SDK idioms rather than the traditional Ruby pattern of Stripe::Billing::MeterEvent.create. The API version string '2026-01-28.clover' is clearly fabricated. The reliance on undefined ApplicationService and ServiceResult classes means the code isn't self-contained, but the core task logic is functionally complete.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": false
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [
                "Stripe::Billing::MeterEvent"
              ],
              "expected_hit_count": 5,
              "expected_total": 6,
              "expected_hit_rate": 0.8333333333333334,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        },
        {
          "run_index": 2,
          "baseline": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 5,
              "contamination_signals": [
                "value field passed as string via .to_s - this may reflect Python SDK conventions where values are sometimes stringified, though it's not clearly wrong",
                "meter_event.identifier is not a documented attribute - the MeterEvent object may not have this field; meter_event.id would be more standard"
              ],
              "brief_assessment": "The code is entirely valid Ruby with no foreign language syntax. It correctly uses Stripe::Billing::MeterEvent.create which is the proper Ruby SDK class for the current Stripe API. The structure, error handling, input validation, batch processing, and documentation are all excellent and production-quality. Minor concerns: `meter_event.identifier` is likely not the correct attribute name (should probably be `meter_event.id` or just omitted), and converting `value` to a string may not be necessary in the Ruby SDK. The `timestamp` parameter being explicitly set is fine but optional. Overall this is a well-structured, thorough implementation that would work with minor adjustments.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": true
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "Stripe::Billing::MeterEvent",
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [],
              "expected_hit_count": 6,
              "expected_total": 6,
              "expected_hit_rate": 1.0,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": true
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [
                "Billing::MeterEvent\\.create\\("
              ],
              "anti_pattern_hit_count": 1,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.16666666666666666,
              "contamination_detected": true
            }
          },
          "with_skill": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 4,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [],
              "brief_assessment": "The code is entirely valid Ruby with no cross-language contamination. It uses the newer Stripe StripeClient-based API (`@client.billing.meter_events.create`) which aligns with recent Stripe Ruby SDK versions, though the exact parameter structure (e.g., passing `options` as a second argument to `.create`, the `stripe_version` constructor kwarg) may have minor deviations from the actual SDK interface. The `value` field is passed as a string which matches Stripe's meter event API. The code is cut off at the very end (missing closing `end` braces for the last method and class), which is a minor completeness issue. Overall it's well-structured with good error handling, retry logic, and input validation.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": false
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [
                "Stripe::Billing::MeterEvent"
              ],
              "expected_hit_count": 5,
              "expected_total": 6,
              "expected_hit_rate": 0.8333333333333334,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          },
          "skill_md_only": null,
          "realistic": {
            "judge": {
              "language_correctness": 5,
              "api_idiomaticity": 3,
              "functional_correctness": 4,
              "code_quality": 4,
              "contamination_signals": [
                "The `@stripe_client.billing.meter_events.create(params: {...})` pattern with a `params:` keyword argument resembles the newer Python SDK's service-based pattern (e.g., `client.billing.meter_events.create(params={...})`). The Ruby stripe gem's StripeClient service-based interface uses positional hash arguments, not a `params:` keyword.",
                "The `stripe_version` keyword in `Stripe::StripeClient.new` constructor follows a pattern more aligned with the Python SDK's client initialization than the Ruby gem's typical configuration via `Stripe.api_version` or client options hash.",
                "The API version string '2026-01-28.clover' is a fabricated future date, suggesting hallucination rather than actual current API version knowledge."
              ],
              "brief_assessment": "The code is syntactically valid Ruby and follows reasonable Rails service object patterns. However, the Stripe client initialization and meter event creation use API patterns that appear contaminated by the Python Stripe SDK \u2014 particularly the `params:` keyword argument in `create()` and the client constructor signature. The hallucinated future API version is also concerning. Error handling is well-structured with specific Stripe exception types, and the overall class design is clean, though it depends on undefined framework classes (ApplicationService, ServiceResult, with_error_handling) that may or may not exist.",
              "cached": false
            },
            "patterns": {
              "expected_results": [
                {
                  "pattern": "Stripe::Billing::MeterEvent",
                  "matched": false
                },
                {
                  "pattern": "event_name",
                  "matched": true
                },
                {
                  "pattern": "api_tokens_used",
                  "matched": true
                },
                {
                  "pattern": "payload",
                  "matched": true
                },
                {
                  "pattern": "stripe_customer_id",
                  "matched": true
                },
                {
                  "pattern": "class\\s+\\w+",
                  "matched": true
                }
              ],
              "expected_hits": [
                "event_name",
                "api_tokens_used",
                "payload",
                "stripe_customer_id",
                "class\\s+\\w+"
              ],
              "expected_misses": [
                "Stripe::Billing::MeterEvent"
              ],
              "expected_hit_count": 5,
              "expected_total": 6,
              "expected_hit_rate": 0.8333333333333334,
              "anti_results": [
                {
                  "pattern": "stripe\\.billing\\.meter_events",
                  "matched": false
                },
                {
                  "pattern": "stripe\\.billing\\.meterEvents",
                  "matched": false
                },
                {
                  "pattern": "Billing::MeterEvent\\.create\\(",
                  "matched": false
                },
                {
                  "pattern": "import stripe",
                  "matched": false
                },
                {
                  "pattern": "const stripe",
                  "matched": false
                },
                {
                  "pattern": "create_usage_record",
                  "matched": false
                }
              ],
              "anti_pattern_hits": [],
              "anti_pattern_hit_count": 0,
              "anti_pattern_total": 6,
              "anti_pattern_hit_rate": 0.0,
              "contamination_detected": false
            }
          }
        }
      ]
    }
  ]
}